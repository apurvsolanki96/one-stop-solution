--- /dev/null
+++ /mnt/data/one-stop-solution-main-src/one-stop-solution-main/backend/utils/config.py
@@ -0,0 +1,14 @@
+from dotenv import load_dotenv

+import os

+

+load_dotenv()

+

+OPENAI_API_KEY = os.getenv("OPENAI_API_KEY") or os.getenv("OPENAI_KEY") or None

+COPILOT_API_KEY = os.getenv("COPILOT_API_KEY") or os.getenv("COPILOT_KEY") or None

+OPENAI_MODEL = os.getenv("OPENAI_MODEL") or os.getenv("OPENAI_DEFAULT_MODEL") or "gpt-4o-mini"

+

+# Simple debug prints (could be changed to logger)

+if not OPENAI_API_KEY:

+    print("Warning: OPENAI_API_KEY is not set")

+if not COPILOT_API_KEY:

+    print("Warning: COPILOT_API_KEY is not set")

--- /mnt/data/one-stop-solution-main-src/one-stop-solution-main/backend/ai/openai_driver.py
+++ /mnt/data/one-stop-solution-main-src/one-stop-solution-main/backend/ai/openai_driver.py
@@ -1,11 +1,12 @@
-

 import openai

 import time

+from backend.utils.config import OPENAI_API_KEY, OPENAI_MODEL

 

 TIMEOUT = 10

 

 def call_openai(model, prompt):

-    openai.api_key = None  # Loaded from env in real system

+    # Load API key from environment/config

+    openai.api_key = OPENAI_API_KEY

 

     for attempt in range(3):

         try:

@@ -14,8 +15,11 @@
                 messages=[{"role":"user","content":prompt}],

                 timeout=TIMEOUT

             )

-            return resp["choices"][0]["message"]["content"]

-

+            # depending on API version, response access may differ

+            if hasattr(resp, "choices"):

+                return resp.choices[0].message.get("content") if resp.choices and resp.choices[0].message else resp.choices[0].text

+            # fallback raw

+            return resp.get("choices", [])[0].get("message", {}).get("content")

         except Exception as e:

             if attempt == 2:

                 raise e

@@ -23,10 +27,10 @@
 

 def run_primary_ai(prompt):

     try:

-        return call_openai("gpt-4.1-turbo", prompt)

-    except:

-        # downgrade

+        return call_openai(OPENAI_MODEL or "gpt-4.1-turbo", prompt)

+    except Exception:

+        # downgrade attempts

         try:

             return call_openai("gpt-4.1-mini", prompt)

-        except:

+        except Exception:

             return None

--- /mnt/data/one-stop-solution-main-src/one-stop-solution-main/backend/ai/copilot_driver.py
+++ /mnt/data/one-stop-solution-main-src/one-stop-solution-main/backend/ai/copilot_driver.py
@@ -1,12 +1,12 @@
-

 import requests

+from backend.utils.config import COPILOT_API_KEY

 

 def run_copilot(prompt):

     try:

         url = "https://api.githubcopilot.com/v1/chat/completions"

         headers = {

             "Content-Type": "application/json",

-            "Authorization": "Bearer <COPILOT_API_KEY>"

+            "Authorization": f"Bearer {COPILOT_API_KEY}" if COPILOT_API_KEY else "Bearer "

         }

 

         payload = {

@@ -19,5 +19,5 @@
             return r.json()["choices"][0]["message"]["content"]

         return None

 

-    except:

+    except Exception:

         return None
